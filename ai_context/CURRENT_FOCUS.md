# SimpleTrade 当前工作重点

**最后更新**: 2024-04-13 15:30

## 当前Sprint目标
开发微信小程序前端，将Web前端的功能移植到微信小程序，并继续集成vnpy的更多功能，如交易功能和行情订阅功能。

## 活跃任务

1. **AI协作方式优化**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 设计并实施更高效的AI协作方式，减少重复说明上下文的需求
   - 相关文件: `ai_context/PROJECT_STATUS.md`, `ai_context/CURRENT_FOCUS.md`, `ai_context/DECISIONS_LOG.md`, `ai_context/AI_COLLABORATION_GUIDE.md`
   - 成果: 创建了AI上下文管理结构和初始文件
   - 完成时间: 2023-10-15 13:30

2. **项目架构设计**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 设计项目的整体架构，包括组件关系、数据流和部署架构
   - 相关文件: `docs/architecture_diagram.md`
   - 成果: 完成了详细的架构设计文档，包括轻量级数据存储方案
   - 完成时间: 2023-10-15 14:20

3. **项目结构创建**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 创建独立的SimpleTrade项目结构，不再依赖于vnpy源码环境
   - 相关文件: 项目根目录下的所有基础文件和目录
   - 成果: 创建了标准的Python项目结构，包括核心包、文档和测试目录
   - 完成时间: 2023-10-15 14:45

4. **项目环境搭建方案**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 设计项目开发环境和基础架构，包括vnpy源码集成、数据库配置等
   - 相关文件: `docs/vnpy_integration_plan.md`, `scripts/setup_vnpy.py`, `scripts/update_vnpy.py`
   - 成果: 详细的环境搭建文档和脚本，并在conda环境中成功安装，规定所有应用安装必须使用conda，并始终使用同一个simpletrade环境
   - 进度: 100%
   - 完成时间: 2024-04-11 17:50

5. **vnpy源码集成方案设计**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 设计vnpy源码集成方案，包括目录结构、依赖管理、源码引用和版本控制策略
   - 相关文件: `docs/vnpy_integration_plan.md`, `.gitmodules`
   - 进度: 100%
   - 完成时间: 2024-04-11 17:50
   - 注意: 更新了方案，使用vnpy的最新版本（4.0.0+）而非原计划的2.3.0版本

6. **核心引擎代码框架设计**
   - 优先级: 高
   - 状态: 进行中
   - 描述: 设计扩展vnpy的核心引擎的代码框架
   - 相关文件: `simpletrade/core/engine.py`, `simpletrade/core/app.py`
   - 进度: 80%
   - 最后更新: 2024-04-11 17:50
   - 注意: 代码框架已设计，并已在conda环境中测试

7. **vnpy源码实际集成**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 执行实际的vnpy源码集成操作，包括初始化Git仓库、添加子模块、安装依赖等
   - 相关文件: `.gitmodules`, `vnpy/`
   - 成果: 成功集成vnpy源码并在conda环境中安装
   - 完成时间: 2024-04-11 17:50

8. **数据管理功能开发**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 开发数据管理功能，包括数据查询、导入、导出、删除等，并集成vnpy的数据模型和管理功能
   - 相关文件: `simpletrade/core/data/manager.py`, `simpletrade/core/data/__init__.py`, `simpletrade/api/data.py`
   - 成果: 成功实现数据管理功能，包括API接口和消息处理器
   - 完成时间: 2024-04-12 14:00

9. **API服务框架开发**
   - 优先级: 高
   - 状态: 已完成
   - 描述: 设计并实现API服务框架，提供RESTful API和WebSocket接口
   - 相关文件: `simpletrade/api/data.py`, `simpletrade/api/analysis.py`, `simpletrade/api/wechat/data.py`
   - 成果: 成功实现数据管理和数据分析的API接口
   - 完成时间: 2024-04-12 14:00

10. **数据分析功能开发**
    - 优先级: 高
    - 状态: 已完成
    - 描述: 开发数据分析功能，包括技术指标计算和策略回测
    - 相关文件: `simpletrade/core/analysis/indicators.py`, `simpletrade/core/analysis/backtest.py`, `simpletrade/api/analysis.py`
    - 成果: 成功实现技术指标计算和策略回测功能，并提供API接口
    - 完成时间: 2024-04-12 14:00

11. **Web前端开发**
    - 优先级: 高
    - 状态: 已完成
    - 描述: 开发简单的Web前端，包括数据管理和数据分析功能
    - 相关文件: `web-frontend/`
    - 成果: 成功实现数据管理和数据分析的Web前端界面
    - 完成时间: 2024-04-12 16:30

12. **项目结构重组**
    - 优先级: 高
    - 状态: 已完成
    - 描述: 重组项目结构，使其更加清晰和有组织
    - 相关文件: `tests/`, `examples/`, `docs/`
    - 成果: 成功重组项目结构，创建了测试、示例和文档目录
    - 完成时间: 2024-04-12 16:30

13. **Web前端启动问题解决**
    - 优先级: 高
    - 状态: 已完成
    - 描述: 解决Web前端启动问题，包括API服务器启动错误和npm安装依赖错误
    - 相关文件: `simpletrade/api/server.py`, `scripts/start_web_frontend.py`, `scripts/start_simple_web.py`, `web-frontend/public/simple.html`
    - 成果: 成功解决Web前端启动问题，创建了简单版HTML前端，并修复API跨域问题和缺失的API端点
    - 完成时间: 2024-04-13 15:30

14. **微信小程序前端开发**
    - 优先级: 高
    - 状态: 待开始
    - 描述: 开发微信小程序前端，将Web前端的功能移植到微信小程序
    - 相关文件: `wechat-miniprogram/`
    - 预期成果: 完整的微信小程序前端，包括数据管理和数据分析功能
    - 计划开始时间: 2024-04-13

15. **测试计划文档编写**
    - 优先级: 高
    - 状态: 待开始
    - 描述: 编写详细的测试策略、测试用例和测试环境规范
    - 相关文件: `docs/test_plan.md`
    - 预期成果: 完整的测试计划文档，包括单元测试、集成测试和性能测试策略

15. **部署和运维文档编写**
    - 优先级: 中
    - 状态: 待开始
    - 描述: 编写系统部署流程、环境要求和监控方案
    - 相关文件: `docs/deployment_operations.md`
    - 预期成果: 详细的部署指南和运维手册



## 阻碍/问题
- 需要确定具体的测试框架和工具
- 需要决定是否使用Docker进行部署
- 需要确定微信小程序与后端的具体交互方式

## 本周目标
1. ✅ 完成vnpy源码集成方案设计
2. ✅ 执行实际的vnpy源码集成操作
3. ✅ 测试运行主程序，验证集成是否成功
4. ✅ 开发数据管理功能，包括数据查询、导入、导出、删除等
5. ✅ 实现数据管理API接口
6. ✅ 完成数据分析功能开发
7. ✅ 完成微信小程序API接口开发
8. ✅ 开发简单的Web前端，包括数据管理和数据分析功能
9. ✅ 重组项目结构，使其更加清晰和有组织
10. ✅ 解决Web前端启动问题，包括API服务器启动错误和npm安装依赖错误

## 下一步具体行动
1. 开发微信小程序前端：
   - 创建微信小程序项目结构
   - 实现用户登录和认证
   - 实现数据管理和数据分析功能
   - 测试微信小程序与后端的交互
2. 继续集成更多vnpy功能：
   - 实现交易功能，包括下单、撤单、查询订单等
   - 实现行情订阅功能，包括实时行情和历史行情
   - 实现交易账户管理功能
3. 实现更多的技术指标和策略
4. 编写测试计划文档和单元测试
5. 优化用户体验，添加更多的图表和可视化
6. 添加更多的数据源和交易接口
