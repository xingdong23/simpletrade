# SimpleTrade 功能需求文档

**版本**: 0.1  
**日期**: 2023-10-15  
**状态**: 初稿  

## 1. 文档目的

本文档详细描述 SimpleTrade 交易平台的功能需求，为开发团队和AI辅助开发提供明确的功能规范和验收标准。

## 2. 项目概述

SimpleTrade 是一个简单易用的个人量化交易平台，采用轻量级前端（微信小程序/H5）和强大后端的架构设计。系统支持策略交易、AI分析和实时监控等功能，通过消息驱动的交互模式提供便捷的用户体验，让普通个人也能轻松使用量化交易。

## 3. 用户角色

系统涉及以下用户角色：

1. **普通用户** - 使用系统进行交易和策略管理的个人投资者
2. **管理员** - 负责系统管理和监控的技术人员

## 4. 功能需求

### 4.1 用户管理

#### 4.1.1 用户注册与登录

| 需求ID | FR-001 |
|-------|--------|
| 名称 | 用户注册 |
| 描述 | 用户可以通过微信授权或手机号注册账户 |
| 用户故事 | 作为新用户，我想要通过微信快速注册账户，以便开始使用交易平台 |
| 验收标准 | 1. 用户可以使用微信授权一键注册<br>2. 用户可以使用手机号+验证码注册<br>3. 注册成功后自动创建用户账户 |
| 优先级 | 高 |

| 需求ID | FR-002 |
|-------|--------|
| 名称 | 用户登录 |
| 描述 | 已注册用户可以通过微信或账号密码登录系统 |
| 用户故事 | 作为已注册用户，我想要便捷地登录系统，以便使用交易功能 |
| 验收标准 | 1. 用户可以使用微信扫码登录<br>2. 用户可以使用手机号+验证码登录<br>3. 登录状态保持合理时间 |
| 优先级 | 高 |

#### 4.1.2 用户信息管理

| 需求ID | FR-003 |
|-------|--------|
| 名称 | 个人资料管理 |
| 描述 | 用户可以查看和修改个人资料 |
| 用户故事 | 作为用户，我想要更新我的个人信息，以便保持资料的准确性 |
| 验收标准 | 1. 用户可以查看当前个人资料<br>2. 用户可以修改昵称、头像等信息<br>3. 修改后的信息立即生效 |
| 优先级 | 中 |

### 4.2 交易功能

#### 4.2.1 交易接口管理

| 需求ID | FR-004 |
|-------|--------|
| 名称 | 交易接口连接 |
| 描述 | 用户可以配置和连接不同的交易接口（如CTP、IB等） |
| 用户故事 | 作为交易者，我想要连接我的交易账户，以便进行实盘交易 |
| 验收标准 | 1. 支持至少3种主流交易接口<br>2. 用户可以输入接口参数并保存<br>3. 系统显示接口连接状态<br>4. 连接成功后自动获取账户信息 |
| 优先级 | 高 |

| 需求ID | FR-005 |
|-------|--------|
| 名称 | 接口参数管理 |
| 描述 | 用户可以管理多个交易接口的参数 |
| 用户故事 | 作为交易者，我想要保存多个交易账户的参数，以便快速切换使用 |
| 验收标准 | 1. 用户可以添加、编辑、删除接口参数<br>2. 参数信息安全加密存储<br>3. 支持参数模板导入导出 |
| 优先级 | 中 |

#### 4.2.2 订单管理

| 需求ID | FR-006 |
|-------|--------|
| 名称 | 手动下单 |
| 描述 | 用户可以手动创建和发送交易订单 |
| 用户故事 | 作为交易者，我想要手动下单买卖证券，以便根据自己的判断进行交易 |
| 验收标准 | 1. 提供直观的下单界面<br>2. 支持限价单、市价单等多种订单类型<br>3. 下单前进行参数合法性检查<br>4. 显示下单结果反馈 |
| 优先级 | 高 |

| 需求ID | FR-007 |
|-------|--------|
| 名称 | 订单查询与撤单 |
| 描述 | 用户可以查询当前订单状态并进行撤单操作 |
| 用户故事 | 作为交易者，我想要查看我的订单状态并在需要时撤销订单，以便灵活管理我的交易 |
| 验收标准 | 1. 显示所有活动订单及其状态<br>2. 支持按多种条件筛选订单<br>3. 一键撤单功能<br>4. 撤单操作结果反馈 |
| 优先级 | 高 |

| 需求ID | FR-008 |
|-------|--------|
| 名称 | 条件单功能 |
| 描述 | 用户可以设置条件单，当满足特定条件时自动触发 |
| 用户故事 | 作为交易者，我想要设置条件单，以便在我不在线时也能按预设条件执行交易 |
| 验收标准 | 1. 支持价格触发条件<br>2. 支持时间触发条件<br>3. 支持技术指标触发条件<br>4. 条件触发后自动执行预设交易动作 |
| 优先级 | 中 |

#### 4.2.3 持仓管理

| 需求ID | FR-009 |
|-------|--------|
| 名称 | 持仓查询 |
| 描述 | 用户可以查看当前持仓情况及盈亏状态 |
| 用户故事 | 作为交易者，我想要实时查看我的持仓情况，以便了解我的投资状态 |
| 验收标准 | 1. 显示所有持仓品种、数量、成本、市值<br>2. 计算并显示浮动盈亏<br>3. 支持按品种、盈亏等条件筛选<br>4. 持仓数据定期自动刷新 |
| 优先级 | 高 |

| 需求ID | FR-010 |
|-------|--------|
| 名称 | 一键平仓 |
| 描述 | 用户可以一键平仓特定持仓或全部持仓 |
| 用户故事 | 作为交易者，我想要能够快速平仓，以便在市场变化时迅速应对 |
| 验收标准 | 1. 支持选择性平仓和全部平仓<br>2. 平仓前提供确认机制<br>3. 平仓后显示执行结果<br>4. 支持设置平仓价格类型（市价/限价） |
| 优先级 | 高 |

### 4.3 策略管理

#### 4.3.1 策略配置

| 需求ID | FR-011 |
|-------|--------|
| 名称 | 策略创建与配置 |
| 描述 | 用户可以创建和配置交易策略 |
| 用户故事 | 作为量化交易者，我想要创建自定义策略，以便自动执行我的交易逻辑 |
| 验收标准 | 1. 提供策略模板选择<br>2. 支持策略参数配置<br>3. 策略配置保存功能<br>4. 策略参数合法性验证 |
| 优先级 | 高 |

| 需求ID | FR-012 |
|-------|--------|
| 名称 | 策略导入导出 |
| 描述 | 用户可以导入和导出策略配置 |
| 用户故事 | 作为量化交易者，我想要导入导出策略配置，以便备份和共享我的策略 |
| 验收标准 | 1. 支持策略配置文件导出<br>2. 支持导入策略配置文件<br>3. 导入时进行格式和安全性验证 |
| 优先级 | 中 |

#### 4.3.2 策略运行管理

| 需求ID | FR-013 |
|-------|--------|
| 名称 | 策略启动与停止 |
| 描述 | 用户可以启动和停止策略运行 |
| 用户故事 | 作为量化交易者，我想要控制策略的运行状态，以便灵活管理自动交易 |
| 验收标准 | 1. 一键启动/停止策略<br>2. 显示策略运行状态<br>3. 策略异常时自动停止并通知<br>4. 支持定时启动/停止 |
| 优先级 | 高 |

| 需求ID | FR-014 |
|-------|--------|
| 名称 | 策略监控 |
| 描述 | 用户可以监控策略运行情况和绩效 |
| 用户故事 | 作为量化交易者，我想要监控策略的运行情况，以便评估策略效果 |
| 验收标准 | 1. 显示策略运行时间、状态<br>2. 显示策略交易记录<br>3. 计算并展示策略收益率、夏普比率等指标<br>4. 支持策略运行日志查看 |
| 优先级 | 高 |

### 4.4 数据管理

#### 4.4.1 市场数据获取

| 需求ID | FR-015 |
|-------|--------|
| 名称 | 行情数据获取 |
| 描述 | 系统可以获取和存储市场行情数据 |
| 用户故事 | 作为交易者，我想要获取实时和历史行情数据，以便进行分析和交易决策 |
| 验收标准 | 1. 支持实时行情数据获取<br>2. 支持历史K线数据下载<br>3. 数据自动定时更新<br>4. 支持多种数据源配置 |
| 优先级 | 高 |

| 需求ID | FR-016 |
|-------|--------|
| 名称 | 数据订阅管理 |
| 描述 | 用户可以管理订阅的行情数据 |
| 用户故事 | 作为交易者，我想要选择性地订阅特定品种的行情，以便优化资源使用 |
| 验收标准 | 1. 支持添加/删除订阅品种<br>2. 显示当前订阅状态<br>3. 支持批量订阅管理<br>4. 订阅设置保存功能 |
| 优先级 | 中 |

#### 4.4.2 数据分析与可视化

| 需求ID | FR-017 |
|-------|--------|
| 名称 | K线图表显示 |
| 描述 | 系统可以显示交易品种的K线图表 |
| 用户故事 | 作为交易者，我想要查看K线图表，以便进行技术分析 |
| 验收标准 | 1. 支持多种时间周期K线显示<br>2. 支持常用技术指标叠加<br>3. 图表缩放和平移功能<br>4. 支持图表样式自定义 |
| 优先级 | 高 |

| 需求ID | FR-018 |
|-------|--------|
| 名称 | 技术指标计算 |
| 描述 | 系统可以计算常用技术指标 |
| 用户故事 | 作为交易者，我想要使用技术指标辅助分析，以便做出更好的交易决策 |
| 验收标准 | 1. 支持至少10种常用技术指标<br>2. 指标参数可自定义<br>3. 指标计算结果可视化显示<br>4. 支持指标组合和保存 |
| 优先级 | 高 |

### 4.5 AI分析功能

#### 4.5.1 AI市场分析

| 需求ID | FR-019 |
|-------|--------|
| 名称 | AI市场分析报告 |
| 描述 | 系统可以生成AI驱动的市场分析报告 |
| 用户故事 | 作为交易者，我想要获取AI生成的市场分析，以便辅助我的投资决策 |
| 验收标准 | 1. 基于技术指标生成分析结论<br>2. 包含市场趋势判断<br>3. 提供潜在支撑/阻力位分析<br>4. 分析报告可保存和分享 |
| 优先级 | 高 |

| 需求ID | FR-020 |
|-------|--------|
| 名称 | 个股/品种深度分析 |
| 描述 | 用户可以请求特定股票或交易品种的AI深度分析 |
| 用户故事 | 作为交易者，我想要获取特定品种的深度分析，以便做出针对性的投资决策 |
| 验收标准 | 1. 支持用户指定分析对象<br>2. 分析包含技术面和基本面因素<br>3. 提供短中长期预测观点<br>4. 分析结果包含风险提示 |
| 优先级 | 中 |

#### 4.5.2 预测模型

| 需求ID | FR-021 |
|-------|--------|
| 名称 | 价格趋势预测 |
| 描述 | 系统使用机器学习模型预测价格趋势 |
| 用户故事 | 作为交易者，我想要查看AI预测的价格趋势，以便参考决策 |
| 验收标准 | 1. 显示短期价格趋势预测<br>2. 提供预测置信度指标<br>3. 预测结果可视化展示<br>4. 定期更新预测结果 |
| 优先级 | 中 |

| 需求ID | FR-022 |
|-------|--------|
| 名称 | 模型训练与优化 |
| 描述 | 系统可以训练和优化预测模型 |
| 用户故事 | 作为高级用户，我想要训练自定义预测模型，以便获得更符合我交易风格的预测 |
| 验收标准 | 1. 提供模型训练界面<br>2. 支持选择训练数据范围<br>3. 显示模型性能评估指标<br>4. 支持模型参数调优 |
| 优先级 | 低 |

### 4.6 通知与提醒

| 需求ID | FR-023 |
|-------|--------|
| 名称 | 交易通知 |
| 描述 | 系统在交易执行、订单状态变化时发送通知 |
| 用户故事 | 作为交易者，我想要收到交易相关的通知，以便及时了解交易状态 |
| 验收标准 | 1. 订单成交时推送通知<br>2. 订单拒绝/撤销时推送通知<br>3. 支持微信消息和应用内通知<br>4. 通知设置可自定义 |
| 优先级 | 高 |

| 需求ID | FR-024 |
|-------|--------|
| 名称 | 价格预警 |
| 描述 | 用户可以设置价格预警，当价格达到特定条件时收到通知 |
| 用户故事 | 作为交易者，我想要设置价格预警，以便在价格达到特定水平时得到提醒 |
| 验收标准 | 1. 支持上破/下破价格预警<br>2. 支持价格波动幅度预警<br>3. 预警触发时多渠道通知<br>4. 预警历史记录查询 |
| 优先级 | 中 |

### 4.7 系统管理

| 需求ID | FR-025 |
|-------|--------|
| 名称 | 系统监控 |
| 描述 | 管理员可以监控系统运行状态 |
| 用户故事 | 作为管理员，我想要监控系统状态，以便确保系统正常运行 |
| 验收标准 | 1. 显示系统关键指标<br>2. 监控交易接口连接状态<br>3. 显示用户活动统计<br>4. 异常情况报警功能 |
| 优先级 | 中 |

| 需求ID | FR-026 |
|-------|--------|
| 名称 | 日志管理 |
| 描述 | 系统记录详细日志，管理员可以查询和分析 |
| 用户故事 | 作为管理员，我想要查看系统日志，以便排查问题和优化系统 |
| 验收标准 | 1. 记录系统操作日志<br>2. 记录用户活动日志<br>3. 支持日志查询和筛选<br>4. 日志定期归档功能 |
| 优先级 | 中 |

## 5. 非功能需求

### 5.1 性能需求

| 需求ID | NFR-001 |
|-------|--------|
| 名称 | 响应时间 |
| 描述 | 系统应在合理时间内响应用户操作 |
| 验收标准 | 1. 页面加载时间<3秒<br>2. 交易操作响应时间<1秒<br>3. 数据查询响应时间<2秒 |
| 优先级 | 高 |

| 需求ID | NFR-002 |
|-------|--------|
| 名称 | 并发处理 |
| 描述 | 系统应能处理多用户并发操作 |
| 验收标准 | 1. 支持至少100用户同时在线<br>2. 高峰期系统性能下降不超过30%<br>3. 交易处理不受并发用户数影响 |
| 优先级 | 中 |

### 5.2 安全需求

| 需求ID | NFR-003 |
|-------|--------|
| 名称 | 数据安全 |
| 描述 | 系统应保护用户数据安全 |
| 验收标准 | 1. 敏感数据加密存储<br>2. 传输数据使用HTTPS<br>3. 定期数据备份<br>4. 符合相关数据保护法规 |
| 优先级 | 高 |

| 需求ID | NFR-004 |
|-------|--------|
| 名称 | 访问控制 |
| 描述 | 系统应实施严格的访问控制 |
| 验收标准 | 1. 基于角色的访问控制<br>2. 敏感操作二次验证<br>3. 异常登录检测<br>4. 会话超时自动登出 |
| 优先级 | 高 |

### 5.3 可用性需求

| 需求ID | NFR-005 |
|-------|--------|
| 名称 | 系统可用性 |
| 描述 | 系统应保持高可用性 |
| 验收标准 | 1. 系统可用性>99.9%<br>2. 计划内维护时间<8小时/月<br>3. 故障恢复时间<30分钟 |
| 优先级 | 高 |

| 需求ID | NFR-006 |
|-------|--------|
| 名称 | 容错能力 |
| 描述 | 系统应具备良好的容错能力 |
| 验收标准 | 1. 单点故障不影响整体系统<br>2. 交易接口断线自动重连<br>3. 数据异常时有降级服务 |
| 优先级 | 中 |

### 5.4 可扩展性需求

| 需求ID | NFR-007 |
|-------|--------|
| 名称 | 系统扩展性 |
| 描述 | 系统应易于扩展以支持更多功能和用户 |
| 验收标准 | 1. 模块化架构设计<br>2. 支持水平扩展<br>3. 新功能可通过插件方式添加<br>4. API设计支持版本兼容 |
| 优先级 | 中 |

## 6. 约束条件

1. 系统必须基于vnpy框架开发
2. 前端必须支持微信小程序
3. 系统必须符合相关金融监管要求
4. 开发必须使用Python作为主要编程语言

## 7. 假设和依赖

1. 假设用户有基本的交易知识
2. 依赖vnpy框架的稳定性和功能完整性
3. 依赖交易接口提供商的API稳定性
4. 假设用户有稳定的网络连接

## 8. 术语表

| 术语 | 定义 |
|-----|------|
| CTP | 中国金融期货交易所交易协议 |
| K线 | 显示开盘、最高、最低和收盘价的图表 |
| 限价单 | 指定价格的交易订单 |
| 市价单 | 以当前市场最优价格执行的订单 |
| 技术指标 | 基于价格和成交量的数学计算，用于预测价格走势 |

## 9. 修订历史

| 版本 | 日期 | 描述 | 作者 |
|-----|------|------|------|
| 0.1 | 2023-10-15 | 初稿 | AI助手 |
